{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Підключення бібліотеки Axios\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43235331-b9827a4a5560b952e70d62539';\n\nexport async function searchImages(image, page) {\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: image,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  console.log(data);\n  return data;\n}\n","export function createGalleryMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width = \"360\"\n              height = \"200\"\n            />\n            <ul class=\"image-info\">\n              <li class=\"item-info\">Likes <span>${likes}</span></li>\n              <li class=\"item-info\">Views <span>${views}</span></li>\n              <li class=\"item-info\">Comments <span>${comments}</span></li>\n              <li class=\"item-info\">Downloads <span>${downloads}</span></li>\n            </ul>\n          </a>\n        </li>\n    `\n    )\n    .join('');\n}\n","// Підключення бібліотеки iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// Підключення бібліотеки SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('#image');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-more');\n\nform.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', loadMore);\n\nlet currentPage = 1;\nlet inputValue = '';\nlet totalPages;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  currentPage = 1;\n  inputValue = input.value;\n\n  gallery.innerHTML = '';\n\n  loadBtn.disabled = false;\n\n  if (input.value.trim() === '') {\n    loadBtn.disabled = true;\n    loadBtn.classList.replace('load-more', 'load-more-hidden');\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Search field cannot be empty!',\n      messageColor: '#fff',\n      backgroundColor: '#ffa000',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const { image } = event.currentTarget.elements;\n\n  loader.style.display = 'inline-block';\n\n  await searchImages(image.value, currentPage)\n    .then(data => {\n      if (data.hits.length === 0) {\n        loadBtn.disabled = true;\n        loadBtn.classList.replace('load-more', 'load-more-hidden');\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#fff',\n          backgroundColor: '#ef4040',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      form.reset();\n      gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n\n      totalPages = Math.ceil(data.totalHits / data.hits.length);\n\n      if (currentPage < totalPages) {\n        loadBtn.classList.replace('load-more-hidden', 'load-more');\n      }\n      simpleLightbox();\n    })\n    .catch(error => alert(error))\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n  input.value = '';\n}\n\nasync function loadMore() {\n  loadBtn.disabled = true;\n  currentPage += 1;\n\n  try {\n    const data = await searchImages(inputValue, currentPage);\n    gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n    simpleLightbox();\n\n    loader.style.display = 'inline-block';\n    loadBtn.disabled = false;\n\n    const item = document.querySelector('.gallery-item');\n    const itemHeight = item.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (currentPage >= totalPages) {\n      loadBtn.disabled = true;\n      loadBtn.classList.replace('load-more', 'load-more-hidden');\n      loader.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results`,\n        messageColor: '#fff',\n        backgroundColor: '#59a10d',\n        position: 'topRight',\n      });\n      return;\n    }\n  } catch (error) {\n    alert(error.message);\n  }\n}\n\nfunction simpleLightbox() {\n  let gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  gallery.refresh();\n}\n"],"names":["BASE_URL","API_KEY","searchImages","image","page","data","axios","createGalleryMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","input","gallery","loader","loadBtn","handleSubmit","loadMore","currentPage","inputValue","totalPages","event","iziToast","simpleLightbox","error","itemHeight","SimpleLightbox"],"mappings":"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"}