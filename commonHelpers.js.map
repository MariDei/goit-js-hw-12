{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Підключення бібліотеки Axios\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43235331-b9827a4a5560b952e70d62539';\n\nexport async function searchImages(image, page) {\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: image,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  console.log(data);\n  return data;\n}\n","export function createGalleryMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              width = \"360\"\n              height = \"200\"\n            />\n            <ul class=\"image-info\">\n              <li class=\"item-info\">Likes <span>${likes}</span></li>\n              <li class=\"item-info\">Views <span>${views}</span></li>\n              <li class=\"item-info\">Comments <span>${comments}</span></li>\n              <li class=\"item-info\">Downloads <span>${downloads}</span></li>\n            </ul>\n          </a>\n        </li>\n    `\n    )\n    .join('');\n}\n","// Підключення бібліотеки iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// Підключення бібліотеки SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('#image');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-more');\n\nlet page = 1;\nform.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', loadMore);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const { image } = event.currentTarget.elements;\n  loader.style.display = 'inline-block';\n  sessionStorage.setItem('image', input.value);\n  page = 1;\n\n  if (input.value.trim() === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Search field cannot be empty!',\n      messageColor: '#fff',\n      backgroundColor: '#ffa000',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  searchImages(input.value)\n    .then(data => {\n      if (data.total === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#fff',\n          backgroundColor: '#ef4040',\n          position: 'topRight',\n        });\n      }\n      gallery.innerHTML = createGalleryMarkup(data.hits);\n      if (page <= data.totalHits) {\n        loadBtn.classList.replace('load-more-hidden', 'load-more');\n      }\n      simpleLightbox();\n    })\n    .catch(error => alert(error))\n    .finally(() => {\n      loader.style.display = 'none';\n    });\n  input.value = '';\n  form.reset();\n}\n\nasync function loadMore() {\n  loadBtn.disabled = true;\n\n  try {\n    const image = sessionStorage.getItem('image');\n    const data = await searchImages(image, page);\n    gallery.insertAdjacentHTML('beforeend', createGalleryMarkup(data.hits));\n    page += 1;\n\n    loadBtn.disabled = false;\n\n    const item = document.querySelector('.gallery-item');\n    const itemHeight = item.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (page > data.totalHits) {\n      loadBtn.classList.replace('load-more', 'load-more-hidden');\n    }\n  } catch (error) {\n    alert(error.message);\n  }\n  simpleLightbox();\n}\n\nfunction simpleLightbox() {\n  let gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  gallery.refresh();\n}\n"],"names":["BASE_URL","API_KEY","searchImages","image","page","data","axios","createGalleryMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","input","gallery","loader","loadBtn","handleSubmit","loadMore","event","iziToast","simpleLightbox","error","itemHeight","SimpleLightbox"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAaC,EAAOC,EAAM,CAC9C,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,GAAGN,CAAQ,GAAI,CAC1C,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,EACD,eAAQ,IAAIC,CAAI,EACTA,CACT,CCpBO,SAASE,EAAoBC,EAAK,CACvC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,0CAE8BL,CAAa;AAAA;AAAA;AAAA,qBAGlCD,CAAY;AAAA,qBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKyBC,CAAK;AAAA,kDACLC,CAAK;AAAA,qDACFC,CAAQ;AAAA,sDACPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAK1D,EACA,KAAK,EAAE,CACZ,CCtBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,YAAY,EAEnD,IAAIhB,EAAO,EACXY,EAAK,iBAAiB,SAAUK,CAAY,EAC5CD,EAAQ,iBAAiB,QAASE,CAAQ,EAE1C,SAASD,EAAaE,EAAO,CAO3B,GANAA,EAAM,eAAc,EACFA,EAAM,cAAc,SACtCJ,EAAO,MAAM,QAAU,eACvB,eAAe,QAAQ,QAASF,EAAM,KAAK,EAC3Cb,EAAO,EAEHa,EAAM,MAAM,KAAI,IAAO,GAAI,CAC7BO,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gCACT,aAAc,OACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,EACD,MACD,CAEDtB,EAAae,EAAM,KAAK,EACrB,KAAKZ,GAAQ,CACRA,EAAK,QAAU,GACjBmB,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,aAAc,OACd,gBAAiB,UACjB,SAAU,UACpB,CAAS,EAEHN,EAAQ,UAAYX,EAAoBF,EAAK,IAAI,EAC7CD,GAAQC,EAAK,WACfe,EAAQ,UAAU,QAAQ,mBAAoB,WAAW,EAE3DK,GACN,CAAK,EACA,MAAMC,GAAS,MAAMA,CAAK,CAAC,EAC3B,QAAQ,IAAM,CACbP,EAAO,MAAM,QAAU,MAC7B,CAAK,EACHF,EAAM,MAAQ,GACdD,EAAK,MAAK,CACZ,CAEA,eAAeM,GAAW,CACxBF,EAAQ,SAAW,GAEnB,GAAI,CACF,MAAMjB,EAAQ,eAAe,QAAQ,OAAO,EACtCE,EAAO,MAAMH,EAAaC,EAAOC,CAAI,EAC3Cc,EAAQ,mBAAmB,YAAaX,EAAoBF,EAAK,IAAI,CAAC,EACtED,GAAQ,EAERgB,EAAQ,SAAW,GAGnB,MAAMO,EADO,SAAS,cAAc,eAAe,EAC3B,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEGvB,EAAOC,EAAK,WACde,EAAQ,UAAU,QAAQ,YAAa,kBAAkB,CAE5D,OAAQM,EAAO,CACd,MAAMA,EAAM,OAAO,CACpB,CACDD,GACF,CAEA,SAASA,GAAiB,CACV,IAAIG,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAClB,CAAG,EACO,QAAO,CACjB"}